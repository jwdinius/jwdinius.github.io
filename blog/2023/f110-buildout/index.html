<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Building the F1TENTH Racecar | Joe Dinius, Ph.D.</title> <meta name="author" content="Joe Dinius, Ph.D."> <meta name="description" content="Walkthrough of my build of the F1TENTH autonomous RC racecar."> <meta name="keywords" content="robotics, autonomy, math, optimization, controltheory, planning, computervision"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?53ca2be8c4ec0d533ef79017d1a2d734"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jwdinius.github.io/blog/2023/f110-buildout/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Joe </span>Dinius, Ph.D.</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">git</a> </li> <li class="nav-item "> <a class="nav-link" href="/learning/">learning</a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/resumeDiniusTargeted.pdf">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Building the F1TENTH Racecar</h1> <p class="post-meta">May 1, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>I feel like I have been putting together my Traxxas RC car <em>forever</em>. When I started back in 2017, the <a href="https://f1tenth.readthedocs.io/en/stable/getting_started/intro.html#doc-build-intro" rel="external nofollow noopener" target="_blank">F1TENTH project</a> wasn’t even a thing yet. Luckily for me, the documentation in this project is pretty easy to follow. I highlight some notable exceptions below.</p> <h2 id="bill-of-materials-bom">Bill-of-Materials (BoM)</h2> <p>For the most part, the <a href="https://docs.google.com/spreadsheets/d/1WT-UdjLTnyrb7CvHcuCxKLnRIN8DWroQ/edit#gid=606618920" rel="external nofollow noopener" target="_blank">Master BoM</a> is pretty good. There were two areas that required additional research on my part though:</p> <ol> <li>Which material to choose for the laser-cut platform deck?</li> <li>Which materials to choose for the power distribution module (PDM)?</li> </ol> <p>For the first item, it took some iteration. I started by ordering two black matte acrylic platform decks from <a href="https://www.ponoko.com/" rel="external nofollow noopener" target="_blank">Ponoko</a> but I snapped both of them when assembling the car. For the next order, I tried two stronger (and more expensive) materials - Black Melamine and Black Delrin. I installed the Black Delrin deck and it worked out fine.</p> <p>The second item required me to do some digging in the <a href="https://groups.google.com/g/f1_10/c/GGuCTB-l78Y" rel="external nofollow noopener" target="_blank">f1tenth forums</a>. Thankfully, I was able to find an <a href="https://docs.google.com/spreadsheets/d/1tbXGLgL5GAHyR6L9F-SnwSzdjveUt-EyJ4-mb8ZAkkw/edit#gid=718958730" rel="external nofollow noopener" target="_blank">updated BoM</a> there.</p> <p>Though it is not called out directly in the BoM, a valuable piece of test equipment to have is a digital power supply like <a href="https://www.amazon.com/Siglent-Technologies-SPD3303X-Triple-Output/dp/B01410O424/ref=sr_1_3_pp?crid=1784OTMM5TCAP&amp;keywords=siglent+power+supply&amp;qid=1702946599&amp;sprefix=siglent+%2Caps%2C156&amp;sr=8-3" rel="external nofollow noopener" target="_blank">this one</a>. Although it can’t be used to power the VESC when it is driving the motors (more on this in the <a href="#setting-up-the-vesc">VESC</a> section below), it can be used while setting up the rest of the physical setup, including the Jetson computer.</p> <p>The primary reason it took me so long to put this kit together is the all-in price tag: <em>about $3k</em>. This is pretty steep for a hobbyist like me, but I finally was able to pull everything together earlier this year.</p> <h2 id="traxxas-modifications">Traxxas modifications</h2> <p>The steps <a href="https://f1tenth.org/build.html" rel="external nofollow noopener" target="_blank">here</a> were performed with no modifications required. As I mentioned previously, I had some issues with the platform deck material having insufficient integrity to be properly installed.</p> <p>I added the foam front fender from the <a href="https://racecarj.com/collections/mit-racecar-build-series/products/racecar-j-robot-base-kit" rel="external nofollow noopener" target="_blank">RACECAR/J kit</a> to lessen the impact of any collisions.</p> <h2 id="building-the-power-distribution-module-pdm">Building the Power Distribution Module (PDM)</h2> <p>The PDM takes in a variable voltage and outputs regulated voltage on 12 and 8V output buses. The 12V output is primarily to power the Jetson NX companion computer. The 8V output is for powering the Hokuyo lidar sensor.</p> <p>I am not an electrical engineer nor am I an electronics technician. It has been several years since I have had to solder anything, so I had to proceed more carefully through this step.</p> <h3 id="soldering-the-pdm">Soldering the PDM</h3> <p>The first consideration in soldering was <a href="https://oshpark.com/shared_projects/qvIKu3aY" rel="external nofollow noopener" target="_blank">ordering</a> the printed circuit board (PCB) to add the electronic components to. The vendor (Oshpark) requires a minimum of three PCBs per order for fabrication, so I decided to build three full PDM assemblies. This would provide adequate backup should I blow up any of them along the way.</p> <p>I remembered from my introductory electronics lab in college that certain electronic components, like diodes, have polarity; that is, there are preferred mounting orientations of components relative to current flow through a circuit. I did not recall that capacitors had polarity, so it was a good thing I found <a href="https://www.yamanelectronics.com/capacitor-anode-cathode-identification/" rel="external nofollow noopener" target="_blank">this diagram</a>:</p> <p><img src="/assets/img/capacitor-polarity.jpg" alt="test-image"></p> <p>Some capacitors do have polarity - there is an anode (+) and a cathode (-) and you need to make sure to install these components correctly. Polarized capacitors are noted in schematics differently than non-polarized ones; see picture above.</p> <p>Specific to the printed PDM PCB: <em>the anode has a longer lead than the cathode and should be installed in the hole nearest the printed component id</em>. Below is a picture of the assembled PDM showing the correct orientations of the polarized electrolytic capacitors.</p> <p><img src="/assets/img/pdm-closeup.jpg" alt="pdm-closeup"></p> <p>The only word of advice I can give would-be builders here is this: <em>get a really fine tip for your soldering iron</em>. Some of the work is rather delicate. You will want some means (like <a href="https://www.amazon.com/Soldering-Flexible-Flashlight-Magnifying-Aluminum/dp/B085958VNK/ref=asc_df_B085958VNK/?tag=&amp;linkCode=df0&amp;hvadid=416720562944&amp;hvpos=&amp;hvnetw=g&amp;hvrand=54914317156848057&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=9031172&amp;hvtargid=pla-909563369713&amp;mcid=60085f6ba32334598761ffc8385d6d82&amp;ref=&amp;adgrpid=95471657178&amp;gclid=CjwKCAiA-P-rBhBEEiwAQEXhH-rqM7q51hxpmGqH7QWW_CrC0ReTt-2zarHQYwnELQpLTs_ckqdYRxoCWXMQAvD_BwE&amp;th=1" rel="external nofollow noopener" target="_blank">this</a>) of keeping the board fixed without having to hold it with a free hand.</p> <h3 id="testing">Testing</h3> <p>Testing is actually pretty straightforward: get a <a href="https://www.adafruit.com/product/2034?gad_source=1&amp;gclid=CjwKCAiA-P-rBhBEEiwAQEXhH2qsnGjb8U37sZ3gdhta1t6iTGKZmXSWB3hyjtttOUlLtYb52cwPRhoCRtUQAvD_BwE" rel="external nofollow noopener" target="_blank">hand-held multimeter</a> and put some voltage (10-24V) across one of the output channels on your power supply. Toggle the on/off switch on each PDM and then check the voltage across each pair in your output bus to make sure the correct voltage - either 12 or 8V - is indicated.</p> <p float="left"> <img src="/assets/img/pdm-8V.jpg" width="320"> <img src="/assets/img/pdm-12V.jpg" width="320"> </p> <h2 id="setting-up-the-jetson">Setting up the Jetson</h2> <p>As indicated in the Master BoM spreadsheet, Nvidia no longer produces the Xavier NX developer kits. The recommended alternative is the Seeed Studio <a href="https://www.seeedstudio.com/reComputer-J2021-p-5438.html" rel="external nofollow noopener" target="_blank">reComputer J2021</a> system-on-module (SoM). This SoM doesn’t have a Wi-Fi card installed, so I had to buy one. Nvidia lags pretty far with respect to releases of their Linux kernel and, as such, the Jetson is limited in terms of what wireless cards it can support. I tried a few Intel cards, but only the <a href="https://www.amazon.com/Intel-Dual-Band-Wireless-Ac-8265/dp/B01MZA1AB2/ref=sr_1_3?crid=1YDDJON2VFI4G&amp;keywords=intel+8265&amp;qid=1702996569&amp;sprefix=intel+8265%2Caps%2C177&amp;sr=8-3" rel="external nofollow noopener" target="_blank">Intel 8265NGW</a> was recognized by the kernel.</p> <p>I also added an <a href="https://www.amazon.com/gp/product/B09DVQQL9G/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;th=1" rel="external nofollow noopener" target="_blank">M2 SSD</a> to add storage capacity to the device.</p> <h2 id="adding-a-camera">Adding a camera</h2> <p>The front fender addition from the RACECAR/J came with a mounting plate that can support a <a href="https://store.stereolabs.com/products/zed-2" rel="external nofollow noopener" target="_blank">ZED 2 stereo camera</a>. I had a ZED 2 from a prior project, so I added it using glue. The connection feels solid, but I have my concerns that it won’t survive racing conditions.</p> <h2 id="putting-it-all-together">Putting it all together</h2> <p>Here’s a picture of the finished build:</p> <p><img src="/assets/img/f1tenth-build.jpg" alt="f1tenth-build"></p> <h2 id="whats-next">What’s next?</h2> <p>Now I need to get all of the electronic peripherals - the sensors, the motor controller, and the Jetson - setup properly. I’ll let you know how it goes.</p> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Joe Dinius, Ph.D.. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>