<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Docker Strangelove | Joe Dinius, Ph.D.</title> <meta name="author" content="Joe Dinius, Ph.D."> <meta name="description" content="How I learned to stop worrying and love containers"> <meta name="keywords" content="robotics, autonomy, math, optimization, controltheory, planning, computervision"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?df44dccb15554b4d2d173cb203488555"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?53ca2be8c4ec0d533ef79017d1a2d734"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jwdinius.github.io/blog/2019/dockerstrangelove/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Joe </span>Dinius, Ph.D.</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">git</a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Docker Strangelove</h1> <p class="post-meta">November 2, 2019</p> <p class="post-tags"> <a href="/blog/2019"> <i class="fas fa-calendar fa-sm"></i> 2019 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p><em>Caveat: I run Ubuntu, and so the contents of this post are specific to this context. Although I believe much of the content would generalize, I have not verified. Regardless, hopefully there will be something of interest to you non-Ubuntu’s out there!</em></p> <p><a href="https://www.docker.com/" rel="external nofollow noopener" target="_blank">Docker</a> is all-the-rage nowadays because of it’s ability to isolate application environments for development and testing. They are super-popular in web contexts, because you can setup lightweight servers and mocks for isolated testing, but they are only just beginning to catch on in robotics. Better late than never, I guess. In this post, I’m going to talk about some of the motivating cases for using Docker in robotics development. I use <a href="https://www.ros.org/" rel="external nofollow noopener" target="_blank">ROS</a> as the starting point, but the context carries over to other networking protocols and frameworks. The topics discussed herein should be sufficiently general to get the point across. Anyways, let’s get on with it.</p> <p>To all the roboticists out there: How many times have you come across a software package that you thought looked promising only to discover that the dependencies clash with your global dev environment? In such a case, you could locally install the clashing dependencies and then point the package to the local install path while building the package. While this certainly works, you are still modifying your workspace and creating potential issues for future development. A <em>better</em> solution would be to create an isolated dev environment, one where you could install the needed dependencies and use them only in the context of development/testing of the new package. This is where containers, particularly <a href="">docker</a> containers, come in. Enough preamble: How about some practical use cases?</p> <p>For the uninitiated, ROS is a popular framework for robotics development. For the initiated, ROS can be endlessly frustrating because of the highly distributed and fluid nature of package development. I will go through a couple of use-cases of how you can use There are different ROS releases, and these releases only have debian packages for certain Ubuntu releases; for example, ROS kinetic is not supported for Ubuntu 18.04. If you are running Ubuntu 18.04 and you find an interesting ROS package built with kinetic, you’re hosed right? <em>Wrong!</em> This leads to the first practical use-case:</p> <h2 id="containers-alleviate-releaseversioning-issues">Containers alleviate release/versioning issues</h2> <p>With Docker, you can build a base image for your package based on the version of Ubuntu you <em>want</em>, rather than the version of Ubuntu you are <em>running</em>. Let’s say you are running Bionic (18.04) on your machine, but one of your colleagues shows you a cool demo they made using kinetic and you want to recreate it. ROS kinetic is not supported for Ubuntu 18.04, so how would you do this? You could create a virtual machine based on Xenial, but virtual machines are unwieldy and resource-intensive. You could buy a new machine, flash it with Xenial and install, but this is not desirable either for financial reasons. Or, you could install ROS kinetic, and all of the necessary packages, from source on your machine, but this might clash with your current dev environment and would be quite time-intensive.</p> <p>All of these options suck, but there is another one: <em>build a Docker image using a Xenial-based image as the starting point</em>. <a href="https://hub.docker.com/" rel="external nofollow noopener" target="_blank">Dockerhub</a> provides a great starting point for finding base images that can be easily extended for multiple contexts. When you do <code class="language-plaintext highlighter-rouge">apt-get</code> to install debian packages, you will be installing them only within the image context: <em>they won’t affect your global dev context!</em> For the example, at hand, you can install ROS kinetic and all of the package dependencies in a docker image’s context and not worry about polluting your global workspace.</p> <p>This example covers the use-case of single applications, but robotic systems are composed of many networked <em>stacks</em>, <em>i.e. combination of multiple software functions for a common purpose</em>, that communicate with each other in tightly-coupled ways; sensors, algorithms, and motors all must robustly and efficiently communicate with each other for the robot to operate successfully. What if we discover a major bug in one of our stacks, and that fixing this bug could have negative impact on the other stacks? Here comes use-case number two:</p> <h2 id="containers-isolate-dependencies">Containers isolate dependencies</h2> <p>Because Docker was designed to work in a web context, which is by its nature networking-friendly, we can use Docker for the context presented in the previous paragraph. Each stack can be encapsulated in its own docker image and all images can be run concurrently during operation of the robot. This approach is much easier to maintain; each stack can be tested in its own isolated context with greater ease.</p> <p>I have a lot more to say on this, but the words are escaping me at the moment so I think that I will leave other thoughts for a later post. I decided recently to try to write for one hour consistently each week and the best way to continue with that, I believe, is to be vigilant about writing for this time and, to start with, only for this time. I don’t want to derail my efforts by making this writing time stressful or otherwise unpleasant. Over time, it is my hope, that the quality of these posts will get more succinct and cogent. Thanks for reading!</p> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Joe Dinius, Ph.D.. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>