<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Non-Minimal (random) Sample and Consensus (NMSAC) | Joe Dinius, Ph.D.</title> <meta name="author" content="Joe Dinius, Ph.D."> <meta name="description" content="One approach for solving the point cloud registration problem with unknown correspondences"> <meta name="keywords" content="robotics, autonomy, math, optimization, controltheory, planning, computervision"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?df44dccb15554b4d2d173cb203488555"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?53ca2be8c4ec0d533ef79017d1a2d734"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jwdinius.github.io/projects/nmsac/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Joe </span>Dinius, Ph.D.</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">git</a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Non-Minimal (random) Sample and Consensus (NMSAC)</h1> <p class="post-description">One approach for solving the point cloud registration problem with unknown correspondences</p> </header> <article> <p><img align="left" width="1280" height="480" src="/assets/img/nmsac/summary_pic.png"></p> <h2 id="abstract">Abstract</h2> <p>In this project writeup, I will discuss the development of <a href="https://github.com/jwdinius/nmsac" rel="external nofollow noopener" target="_blank">NMSAC</a>, which is an end-to-end solver for identifying the rigid motion (translation + rotation) that best aligns two point clouds: a source and target. It is furthermore assumed that there are no known correspondences between points in the source and target clouds. I will discuss the following three main aspects of NMSAC algorithm:</p> <ul> <li>Find correspondences</li> <li>Use found correspondences to coarsely align the two point clouds</li> <li>Perform fine alignment of point clouds (to account for any noise present)</li> </ul> <h2 id="introduction">Introduction</h2> <p>NMSAC is the culmination of 1+ years’ worth of work. I have written a few posts along the way summarizing the state of development:</p> <ul> <li><a href="/blog/2019/point-match">Point Cloud Registration as Optimization, Part One</a></li> <li><a href="/blog/2020/point-match-cont">Point Cloud Registration as Optimization, Part Two</a></li> <li><a href="/blog/2020/point-match-sol">Point Cloud Registration as Optimization, Code Implementation</a></li> <li><a href="/blog/2021/max-clique">Finding Point Cloud Correspondences Using Undirected Graphs</a></li> </ul> <p>With the exception of the third post linked above, these posts summarize the problem statement and algorithms used to solve the problem. I won’t go through these details again here. This writeup will instead be an executive summary of the project.</p> <p>This project was predominately about developing skills in the following areas:</p> <ul> <li>Project organization using <a href="https://cmake.org/" rel="external nofollow noopener" target="_blank">CMake</a> - <em>what is the best way to organize projects so that components can be easily included/excluded from the final build?</em> </li> <li>Application development using <a href="http://arma.sourceforge.net/" rel="external nofollow noopener" target="_blank">Armadillo</a> and <a href="https://www.mlpack.org/" rel="external nofollow noopener" target="_blank">MLPack</a> - <em>these API are nice considering Armadillo’s high degree of similarity to Matlab syntax and function names</em> </li> <li>Developing simple, modular interfaces for rapid algorithm prototyping - <em>what is the minimal information needed in a function call to setup and solve the problems considered?</em> </li> <li>Building solid CI for maintaining project integrity - <em>how to perform post-commit verification and integrity checks automatically?</em> </li> </ul> <h2 id="project-details">Project Details</h2> <p>I have posted the project code on <a href="https://github.com/jwdinius/nmsac" rel="external nofollow noopener" target="_blank">GitHub</a>. The <a href="https://github.com/jwdinius/nmsac/blob/develop/README.md" rel="external nofollow noopener" target="_blank">README</a> covers steps for reproducing results, but I will go over high-level aspects of the project in the subsequent sections of this writeup to give more context.</p> <h3 id="problem-statement">Problem Statement</h3> <p>From the project’s <a href="https://github.com/jwdinius/nmsac/blob/develop/README.md" rel="external nofollow noopener" target="_blank">README</a>:</p> <p>The basic workflow to achieve non-minimal sample consensus between two point clouds, <code class="language-plaintext highlighter-rouge">src</code> and <code class="language-plaintext highlighter-rouge">tgt</code>, is:</p> <blockquote> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>Algorithm 1: NMSAC
In: src, tgt, config
Out: H, homogeneous transformation that best maps src onto tgt, number of inliers, number of iterations
Initialize
loop:
  sample a set of config.N points from src (and mark the points that have been chosen)
  loop:
    sample a set of config.N points from tgt (and mark the points that have been chosen)
    Identify correspondences between subsampled src and subsampled tgt point sets (Algorithm 2)
    Identify best fit transformation that maps subsampled src points onto subsampled tgt points using correspondences found (Algorithm 3a)
    (optional) Perform iterative alignment of original src and tgt point sets using best fit transformation as starting point (Algorithm 3b)
    count inliers and update if number is higher than all previous iterations
    check for convergence, exit both loops if converged
</code></pre></div> </div> </blockquote> <h3 id="what-was-achieved">What Was Achieved</h3> <ul> <li>Efficient packaging of development environment using <a href="https://www.docker.com/" rel="external nofollow noopener" target="_blank">Docker</a> <ul> <li>This same development environment is used in the CI pipeline</li> </ul> </li> <li>Demonstration of package management using modern CMake paradigms (such as generator expressions for conditional variable evaluation at build-time)</li> <li>Development of a highly-performant representation of a recent academic work (<a href="https://arxiv.org/abs/1904.03483" rel="external nofollow noopener" target="_blank">SDRSAC</a>) presented at the world’s preeminent computer vision conference, <a href="https://cvpr2019.thecvf.com/" rel="external nofollow noopener" target="_blank">CVPR</a> </li> <li>Creation of a simple and elegant interface to the algorithm that is easily configured at runtime for different languages <ul> <li>Currently only C++ and Python are implemented, but the pattern for building different language bindings is really simple</li> <li>Runtime configuration is specified by JSON-compliant data structure (input as a string at the function input boundary)</li> <li>This enables quick experimentation with different algorithms and their configurations without recompiling</li> </ul> </li> <li>CI pipeline that performs pre-compile checks (e.g. linting), runtime checks (e.g. code coverage), and unit testing using <a href="https://circleci.com/" rel="external nofollow noopener" target="_blank">circleci</a> and <a href="https://github.com/google/googletest" rel="external nofollow noopener" target="_blank">GoogleTest</a> </li> </ul> <h2 id="concluding-remarks">Concluding Remarks</h2> <p>Wrapping up work on this project is really bittersweet for me. I started it with a lot of excitement about possibilities for publication and collaboration with the lead author of the original SDRSAC paper. This collaboration never materialized unfortunately, so I pivoted away from pushing forward with any original research and decided to focus on how to build clean, elegant application interfaces for original research. In this regard, I think the project was a real success, as I’ve already been able to use what I’ve learned about the GoogleTest and CMake APIs to improve my work development processes significantly. I’ve really enjoyed my time developing NMSAC, but I realized that I have stopped making substantive progress and I find the work I have been doing lately to be really unsatisfying. This writeup is my “farewell” to NMSAC, however it is my sincere hope that others will take what I’ve done and find inspiration. For those whose interest has been peaked, here are some ideas for future work:</p> <ul> <li>Test NMSAC against standard 3D registration datasets (e.g. <a href="http://www.cvlibs.net/datasets/kitti/index.php" rel="external nofollow noopener" target="_blank">KITTI</a>)</li> <li>Run different samples concurrently using multiple threads <ul> <li>This would be really easy considering the double for-loop architecture employed for drawing and evaluating subsamples from the source and target point cloud sets</li> </ul> </li> <li>Add new, more efficient iterative closest point (ICP) algorithms for fine-alignment <ul> <li>The convention from the original SDRSAC paper to do ICP alignment after each subsampling period was adopted in NMSAC. However, this approach dramatically decreases runtime execution speed. Something else to consider would be to only do fine alignment with ICP (or a variant) once at the end of execution</li> </ul> </li> </ul> <h2 id="some-additional-references">Some Additional References</h2> <ul> <li><a href="https://arxiv.org/abs/1904.03483" rel="external nofollow noopener" target="_blank">Original SDRSAC paper</a></li> <li><a href="http://yulanguo.me/dataset.html" rel="external nofollow noopener" target="_blank">List of 3D Registration Datasets</a></li> <li><a href="https://cs.gmu.edu/~kosecka/cs685/cs685-icp.pdf" rel="external nofollow noopener" target="_blank">Nice Summary of Coarse- and Fine-Alignment Methods for Point Cloud Registration</a></li> </ul> <h1 id="thanks-for-reading">Thanks for reading!</h1> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Joe Dinius, Ph.D.. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>